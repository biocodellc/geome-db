\copy (SELECT p.id AS project_id, e.id AS expedition_id, t.id AS event_id, j.* FROM public.projects p JOIN expeditions e ON e.project_id = p.id JOIN network_1.event t ON t.expedition_id = e.id, LATERAL jsonb_to_record(t.data) AS j("urn:island" TEXT, "urn:country" TEXT, "urn:eventID" TEXT, "urn:habitat" TEXT, "urn:locality" TEXT, "urn:enteredBy" TEXT, "urn:recordedBy" TEXT, "urn:dayCollected" TEXT, "urn:microHabitat" TEXT, "urn:yearCollected" TEXT, "urn:continentOcean" TEXT, "urn:monthCollected" TEXT, "urn:decimalLatitude" TEXT, "urn:decimalLongitude" TEXT, "urn:samplingProtocol" TEXT, "urn:depthOfBottomInMeters" TEXT) WHERE p.id IN (446,120,131,172,413,461,84,85,44,114,125,200,281,323,343,383,421,460,462,501,54,554,555,562,575,601,61,611,62,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83)) TO 'events.csv' WITH CSV HEADER;
\copy (SELECT p.id AS project_id, e.id AS expedition_id, t.id AS sample_id, j.* FROM public.projects p JOIN expeditions e ON e.project_id = p.id JOIN network_1.sample t ON t.expedition_id = e.id, LATERAL jsonb_to_record(t.data) AS j("urn:phylum" TEXT, "urn:weight" TEXT, "urn:eventID" TEXT, "urn:EnteredBy" TEXT, "urn:weightUnits" TEXT, "urn:preservative" TEXT, "urn:organismRemarks" TEXT, "urn:materialSampleID" TEXT, "urn:occurrenceRemarks" TEXT, "urn:sampleOwnerInstitutionCode" TEXT) WHERE p.id IN (446,120,131,172,413,461,84,85,44,114,125,200,281,323,343,383,421,460,462,501,54,554,555,562,575,601,61,611,62,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83)) TO 'samples.csv' WITH CSV HEADER;
\copy (SELECT p.id AS project_id, e.id AS expedition_id, t.id AS event_photo_id, j.* FROM public.projects p JOIN expeditions e ON e.project_id = p.id JOIN network_1.event_photo t ON t.expedition_id = e.id, LATERAL jsonb_to_record(t.data) AS j("img128" TEXT, "img512" TEXT, "img1024" TEXT, "photoID" TEXT, "filename" TEXT, "processed" TEXT, "urn:eventID" TEXT) WHERE p.id IN (446,120,131,172,413,461,84,85,44,114,125,200,281,323,343,383,421,460,462,501,54,554,555,562,575,601,61,611,62,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83)) TO 'event_photos.csv' WITH CSV HEADER;
\copy (SELECT p.id AS project_id, e.id AS expedition_id, t.id AS sample_photo_id, j.* FROM public.projects p JOIN expeditions e ON e.project_id = p.id JOIN network_1.sample_photo t ON t.expedition_id = e.id, LATERAL jsonb_to_record(t.data) AS j("img128" TEXT, "img512" TEXT, "img1024" TEXT, "photoID" TEXT, "filename" TEXT, "processed" TEXT, "urn:materialSampleID" TEXT, "imageProcessingErrors" TEXT) WHERE p.id IN (446,120,131,172,413,461,84,85,44,114,125,200,281,323,343,383,421,460,462,501,54,554,555,562,575,601,61,611,62,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83)) TO 'sample_photos.csv' WITH CSV HEADER;
\copy (SELECT p.id AS project_id, e.id AS expedition_id, t.id AS tissue_id, j.* FROM public.projects p JOIN expeditions e ON e.project_id = p.id JOIN network_1.tissue t ON t.expedition_id = e.id, LATERAL jsonb_to_record(t.data) AS j("urn:wellID" TEXT, "urn:plateID" TEXT, "urn:tissueID" TEXT, "urn:materialSampleID" TEXT, "urn:geneticTissueType" TEXT) WHERE p.id IN (446,120,131,172,413,461,84,85,44,114,125,200,281,323,343,383,421,460,462,501,54,554,555,562,575,601,61,611,62,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83)) TO 'tissues.csv' WITH CSV HEADER;
